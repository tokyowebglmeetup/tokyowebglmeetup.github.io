!function(){window.tokyo=window.tokyo||{},tokyo.header3d={};var e=tokyo.header3d,t=1024;e.el=document.querySelector(".TWM2-pageHeader__logo"),e.width=Math.max(t,window.innerWidth),e.height=250,e.needUpdate=!1,e.defaultCameraPosition=new THREE.Vector3(0,2,20),e.init=function(){var t,a;e.scene=new THREE.Scene,e.scene.fog=new THREE.FogExp2(1118481,.05),e.camera=new THREE.PerspectiveCamera(40,e.width/e.height,1,100),e.camera.position=e.defaultCameraPosition.clone(),e.renderer=new THREE.WebGLRenderer({antialias:!0}),e.renderer.setSize(e.width,e.height),e.renderer.setClearColor(1118481,1),e.renderer.shadowMapEnabled=!0,e.renderer.shadowMapSoft=!0,e.el.removeChild(e.el.querySelector("img")),e.el.appendChild(e.renderer.domElement),t=new THREE.AmbientLight(6710886),e.scene.add(t),a=new THREE.DirectionalLight(16777215),a.position.set(0,10,20),a.target.position.set(0,0,0),a.castShadow=!0,a.shadowMapWidth=512,a.shadowMapHeight=512,a.shadowCameraNear=1,a.shadowCameraFar=30,a.shadowCameraLeft=-12,a.shadowCameraRight=12,a.shadowCameraTop=8,a.shadowCameraBottom=-8,a.shadowDarkness=.3,e.scene.add(a),window.addEventListener("scroll",function(){var t=window.pageYOffset;e.height<t||(e.camera.position.y=e.defaultCameraPosition.y-t/150,e.needUpdate=!0)}),window.addEventListener("mousemove",function(t){var a=t.clientX/e.width*2-1;e.camera.position.x=3*a,e.needUpdate=!0})},e.renderLoop=function(){requestAnimationFrame(e.renderLoop),e.checkWindowConditions(),!e.needUpdate||e.height<window.pageYOffset||(e.needUpdate=!1,e.renderer.render(e.scene,e.camera))},e.checkWindowConditions=function(){e.width!=window.innerWidth&&(e.width=Math.max(t,window.innerWidth),e.renderer.setSize(e.width,e.height),e.camera.aspect=e.width/e.height,e.camera.updateProjectionMatrix(),e.needUpdate=!0)},e.Karesansui=function(){THREE.EventDispatcher.prototype.apply(this);var t=this,a=new THREE.JSONLoader;a.load("./assets/models/karesansui/karesansui.js",function(a,n){n.forEach(function(t){t.map&&t.map.addEventListener("update",function(){e.needUpdate=!0})}),t.mesh=new THREE.Mesh(a,new THREE.MeshFaceMaterial(n)),t.mesh.traverse(function(e){e.castShadow=!1,e.receiveShadow=!0}),e.scene.add(t.mesh),e.needUpdate=!0})},e.Logo=function(){THREE.EventDispatcher.prototype.apply(this);var t=this,a=new THREE.JSONLoader;a.load("./assets/models/logo/webgl.js",function(a,n){n[0]=new THREE.MeshPhongMaterial({color:11075584,specular:16777215,emissive:0,shininess:100,ambient:0}),t.mesh=new THREE.Mesh(a,new THREE.MeshFaceMaterial(n)),t.mesh.traverse(function(e){e.castShadow=!0,e.receiveShadow=!1}),t.mesh.rotation.x=THREE.Math.degToRad(90),t.mesh.scale.set(3,3,3),t.mesh.position.set(-4,1.5,12),e.scene.add(t.mesh),e.needUpdate=!0})},e.Text=function(t){THREE.EventDispatcher.prototype.apply(this);var a,n,o,i,s,t=t,r=.5,d=0,h=new THREE.Geometry,c=[];for(a=0,n=t.length;n>a;a++){s=new THREE.TextGeometry(t[a],{size:r,height:.1*r,curveSegments:4,font:"gentilis",weight:"bold",style:"normal",bevelThickness:.05*r,bevelSize:.025*r,bevelEnabled:!0,material:0,extrudeMaterial:1});for(var o=0,i=s.vertices.length;i>o;o++)s.vertices[o].y+=d;s.computeBoundingBox(),s.computeVertexNormals(),THREE.GeometryUtils.merge(h,s),c.push(new THREE.MeshPhongMaterial({color:13421772,specular:16777215,emissive:0,shininess:100,ambient:0,shading:THREE.FlatShading})),c.push(new THREE.MeshPhongMaterial({color:13421772,specular:16777215,emissive:0,shininess:100,ambient:0,shading:THREE.SmoothShading})),d+=s.boundingBox.max.y}h.computeBoundingBox(),h.computeVertexNormals(),this.mesh=new THREE.Mesh(h,new THREE.MeshFaceMaterial(c)),this.mesh.traverse(function(e){e.castShadow=!0,e.receiveShadow=!1}),this.mesh.position.y=-s.boundingBox.max.y/2,this.mesh.scale.set(3,3,3),this.mesh.position.set(0,.2,12),e.scene.add(this.mesh),e.needUpdate=!0},tokyo.header3d.init(),tokyo.header3d.renderLoop();new tokyo.header3d.Karesansui,new tokyo.header3d.Logo,new tokyo.header3d.Text(["MEETUP","TOKYO"])}();